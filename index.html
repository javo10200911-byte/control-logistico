<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title> Registros de Cargue y Descargue</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 20px;
    }

    h2 {
      margin-bottom: 10px;
    }

    .card {
      background: #fff;
      padding: 20px;
      border-radius: 6px;
      margin-bottom: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,.1);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
    }

    input, select, textarea, button {
      padding: 8px;
      font-size: 14px;
      width: 100%;
    }

    textarea {
      resize: vertical;
    }

    button {
      background: #2ecc71;
      color: #fff;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    th {
      background: #2c3e50;
      color: white;
      padding: 8px;
    }

    td {
      padding: 6px;
      border-bottom: 1px solid #ddd;
      text-align: center;
    }
  </style>
</head>
<body>

<!-- ================= REGISTRO ================= -->
<div class="card">
  <h2> Registrar operaci贸n</h2>

  <div class="grid">
    <input id="transportadora" placeholder="Transportadora">
    <input id="conductor" placeholder="Conductor">
    <input id="placa" placeholder="Placa">
    <input id="producto" placeholder="Producto">

    <select id="operacion">
      <option value="">Operaci贸n</option>
      <option value="Cargue">Cargue</option>
      <option value="Descargue">Descargue</option>
    </select>

    <input id="inicio" type="time">
    <input id="fin" type="time">
    <input id="minutos" placeholder="Tiempo (ej: 2 hh)">
    <input id="muelle" placeholder="Muelle">
    <input id="responsable" placeholder="Responsable">
  </div>

  <br>
  <textarea id="observaciones" placeholder="Observaciones"></textarea>
  <br><br>

  <button onclick="registrar()">Registrar</button>
</div>

<!-- ================= TABLA ================= -->
<div class="card">
  <h2> Registros</h2>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Fecha</th>
        <th>Transportadora</th>
        <th>Conductor</th>
        <th>Placa</th>
        <th>Producto</th>
        <th>Operaci贸n</th>
        <th>Inicio</th>
        <th>Fin</th>
        <th>Minutos</th>
        <th>Muelle</th>
        <th>Responsable</th>
        <th>Observaciones</th>
      </tr>
    </thead>
    <tbody id="tabla"></tbody>
  </table>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxn-v6Tc9bI-_QHAcRO6yTvGjHdnqG7vIt1neQ8LEmIlyEgtQbdcAe7_vCibeJjojPbYw/exec";

// -------- REGISTRAR --------
function registrar() {
  const data = {
    transportadora: document.getElementById("transportadora").value,
    conductor: document.getElementById("conductor").value,
    placa: document.getElementById("placa").value,
    producto: document.getElementById("producto").value,
    operacion: document.getElementById("operacion").value,
    inicio: document.getElementById("inicio").value,
    fin: document.getElementById("fin").value,
    minutos: document.getElementById("minutos").value,
    muelle: document.getElementById("muelle").value,
    responsable: document.getElementById("responsable").value,
    observaciones: document.getElementById("observaciones").value
  };

  fetch(API_URL, {
    method: "POST",
    body: JSON.stringify(data)
  })
  .then(r => r.json())
  .then(() => {
    cargarRegistros();
    alert("Registro guardado correctamente");
  })
  .catch(() => alert("Error de conexi贸n"));
}

// -------- CARGAR REGISTROS --------
function cargarRegistros() {
  fetch(API_URL)
    .then(r => r.json())
    .then(data => {
      const tbody = document.getElementById("tabla");
      tbody.innerHTML = "";

      data.forEach((r, i) => {
        tbody.innerHTML += `
          <tr>
            <td>${i + 1}</td>
            <td>${r.Fecha || ""}</td>
            <td>${r.Transportadora || ""}</td>
            <td>${r.Conductor || ""}</td>
            <td>${r.Placa || ""}</td>
            <td>${r.Producto || ""}</td>
            <td>${r.Operacion || ""}</td>
            <td>${r.Inicio || ""}</td>
            <td>${r.Fin || ""}</td>
            <td>${r.Minutos || ""}</td>
            <td>${r.Muelle || ""}</td>
            <td>${r.Responsable || ""}</td>
            <td>${r.Observaciones || ""}</td>
          </tr>
        `;
      });
    });
}

window.onload = cargarRegistros;
</script>

</body>
</html>
