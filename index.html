<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸš› Registros de Cargue y Descargue</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f6f8;
  padding:20px;
}

h1{
  margin-bottom:15px;
}

.card{
  background:#fff;
  padding:15px;
  border-radius:8px;
  box-shadow:0 2px 8px rgba(0,0,0,.1);
  margin-bottom:20px;
}

form{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap:10px;
}

input, select, textarea, button{
  padding:8px;
  border-radius:5px;
  border:1px solid #ccc;
  font-size:14px;
}

textarea{
  grid-column:1 / -1;
}

button{
  background:#0d6efd;
  color:#fff;
  border:none;
  cursor:pointer;
}

button:hover{
  background:#084298;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}

th, td{
  border:1px solid #ddd;
  padding:6px;
  font-size:13px;
  text-align:center;
}

th{
  background:#2c3e50;
  color:#fff;
}
</style>
</head>

<body>

<h1>ðŸ“‹ Registros de Cargue y Descargue</h1>

<div class="card">
<form id="formRegistro">

  <input type="date" name="fecha" required>

  <input name="transportadora" placeholder="Transportadora" required>
  <input name="conductor" placeholder="Conductor" required>
  <input name="placa" placeholder="Placa" required>
  <input name="producto" placeholder="Producto" required>

  <select name="operacion" required>
    <option value="">OperaciÃ³n</option>
    <option>Cargue</option>
    <option>Descargue</option>
  </select>

  <input type="time" name="inicio" required>
  <input type="time" name="fin" required>

  <input name="minutos" placeholder="DuraciÃ³n (ej: 2 hh 05 mm)">
  <input name="muelle" placeholder="Muelle">
  <input name="responsable" placeholder="Responsable">

  <textarea name="observaciones" placeholder="Observaciones"></textarea>

  <button type="submit">ðŸ’¾ Registrar</button>

</form>
</div>

<div class="card">
<table>
<thead>
<tr>
  <th>#</th>
  <th>Fecha</th>
  <th>Transportadora</th>
  <th>Conductor</th>
  <th>Placa</th>
  <th>Producto</th>
  <th>OperaciÃ³n</th>
  <th>Inicio</th>
  <th>Fin</th>
  <th>Minutos</th>
  <th>Muelle</th>
  <th>Responsable</th>
  <th>Observaciones</th>
</tr>
</thead>
<tbody id="tablaBody"></tbody>
</table>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyOnRWZxaZq7ekI_FCIIKulICD3QwZsqZENxX5lC_OWfAL2pYoT2KtR6-6j_Wm7Rp4DmQ/exec"; // ðŸ‘ˆ PEGA AQUÃ TU URL

document.getElementById("formRegistro").addEventListener("submit", e => {
  e.preventDefault();

  const formData = new FormData(e.target);
  const data = Object.fromEntries(formData.entries());

  fetch(API_URL, {
    method: "POST",
    headers: { "Content-Type":"application/json" },
    body: JSON.stringify(data)
  })
  .then(r => r.json())
  .then(res => {
    if(res.ok){
      alert("Registro guardado âœ…");
      e.target.reset();
      cargarRegistros();
    }else{
      alert("Error al guardar");
    }
  })
  .catch(err => {
    console.error(err);
    alert("Error de conexiÃ³n");
  });
});

function cargarRegistros(){
  fetch(API_URL)
    .then(r => r.json())
    .then(data => {
      const tbody = document.getElementById("tablaBody");
      tbody.innerHTML = "";

      data.forEach((r, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${i+1}</td>
          <td>${r.Fecha || ""}</td>
          <td>${r.Transportadora || ""}</td>
          <td>${r.Conductor || ""}</td>
          <td>${r.Placa || ""}</td>
          <td>${r.Producto || ""}</td>
          <td>${r.OperaciÃ³n || r.Operacion || ""}</td>
          <td>${r.Inicio || ""}</td>
          <td>${r.Fin || ""}</td>
          <td>${r.Minutos || ""}</td>
          <td>${r.Muelle || ""}</td>
          <td>${r.Responsable || ""}</td>
          <td>${r.Observaciones || ""}</td>
        `;
        tbody.appendChild(tr);
      });
    });
}

cargarRegistros();
</script>

</body>
</html>


