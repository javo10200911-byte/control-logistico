<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ðŸš› Control Cargue y Descargue</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f5f4;
      margin: 0;
      padding: 0;
    }

    header {
      background: #ffffff;
      padding: 15px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
      border-bottom: 1px solid #ddd;
    }

    .container {
      width: 95%;
      margin: 20px auto;
      background: #ffffff;
      padding: 20px;
      border-radius: 6px;
    }

    .tabs {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }

    .tabs span {
      cursor: pointer;
      font-weight: bold;
      color: #555;
    }

    .tabs .active {
      color: #2ecc71;
      border-bottom: 2px solid #2ecc71;
      padding-bottom: 4px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    input, select {
      padding: 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
      width: 100%;
    }

    textarea {
      grid-column: span 2;
      padding: 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    button {
      background: #27ae60;
      color: white;
      padding: 10px 18px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 10px;
    }

    button:hover {
      background: #219150;
    }

    .filters {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-top: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      font-size: 14px;
    }

    th {
      background: #2c3e50;
      color: white;
      padding: 8px;
    }

    td {
      padding: 8px;
      border-bottom: 1px solid #ddd;
      text-align: center;
    }
  </style>
</head>

<body>

<header>
  ðŸš› CONTROL CARGUE Y DESCARGUE
</header>

<div class="container">

  <div class="tabs">
    <span class="active">ðŸ“‹ Registros</span>
    <span>ðŸ“Š Dashboard</span>
    <span>ðŸ“‘ Reportes</span>
  </div>

  <!-- FORMULARIO -->
  <div class="form-grid">
    <input id="transportadora" placeholder="Transportadora">
    <input id="conductor" placeholder="Conductor">
    <input id="placa" placeholder="Placa">
    <input id="producto" placeholder="Producto">

    <select id="operacion">
      <option value="">OperaciÃ³n</option>
      <option value="Cargue">Cargue</option>
      <option value="Descargue">Descargue</option>
    </select>

    <input id="fecha" type="date">
    <input id="inicio" type="time">
    <input id="fin" type="time">
    <input id="muelle" placeholder="Muelle">
    <input id="responsable" placeholder="Responsable">

    <textarea id="observaciones" placeholder="Observaciones (Opcional)"></textarea>
  </div>

 <button type="button" onclick="registrar()">Registrar</button>


  <!-- FILTROS -->
  <div class="filters">
    <input type="date">
    <input placeholder="Transportadora">
    <input placeholder="Placa">
    <input placeholder="Producto">
    <button>Filtrar</button>
  </div>

  <!-- TABLA -->
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Transportadora</th>
        <th>Conductor</th>
        <th>Placa</th>
        <th>Producto</th>
        <th>OperaciÃ³n</th>
        <th>Inicio</th>
        <th>Fin</th>
        <th>Minutos</th>
        <th>Muelle</th>
        <th>Responsable</th>
        <th>Observaciones</th>
      </tr>
    </thead>
    <tbody id="tabla"></tbody>
  </table>

</div>
<script>
function registrar() {

  const inicio = document.getElementById("inicio").value;
  const fin = document.getElementById("fin").value;

  let minutos = "";
  if (inicio && fin) {
    const i = new Date(`1970-01-01T${inicio}`);
    const f = new Date(`1970-01-01T${fin}`);
    minutos = Math.round((f - i) / 60000);
  }

  const formData = new URLSearchParams({
    fecha: document.getElementById("fecha").value,
    transportadora: document.getElementById("transportadora").value,
    conductor: document.getElementById("conductor").value,
    placa: document.getElementById("placa").value,
    producto: document.getElementById("producto").value,
    operacion: document.getElementById("operacion").value,
    inicio,
    fin,
    minutos,
    muelle: document.getElementById("muelle").value,
    responsable: document.getElementById("responsable").value,
    observaciones: document.getElementById("observaciones").value
  });

  fetch(URL_SCRIPT, {
    method: "POST",
    body: formData
  })
  .then(res => res.json())
  .then(resp => {
    if (resp.ok) {
      alert("Registro guardado correctamente âœ…");
      cargarRegistros(); // Refrescar la tabla despuÃ©s de registrar
    } else {
      alert("Error: " + resp.error);
    }
  })
  .catch(() => alert("Error enviando datos âŒ"));
}

const URL_SCRIPT = "https://script.google.com/macros/s/AKfycbyOnRWZxaZq7ekI_FCIIKulICD3QwZsqZENxX5lC_OWfAL2pYoT2KtR6-6j_Wm7Rp4DmQ/exec";

function cargarRegistros() {
  fetch(URL_SCRIPT)
    .then(res => res.json())
    .then(data => {
      const tabla = document.getElementById("tabla");
      tabla.innerHTML = "";

      data.forEach((r, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${i + 1}</td>
          <td>${new Date(r.Fecha).toLocaleString()}</td>
          <td>${r.Transportadora || ""}</td>
          <td>${r.Conductor || ""}</td>
          <td>${r.Placa || ""}</td>
          <td>${r.Producto || ""}</td>
          <td>${r.OperaciÃ³n || ""}</td>
          <td>${r.Inicio || ""}</td>
          <td>${r.Fin || ""}</td>
          <td>${r.Minutos || ""}</td>
          <td>${r.Muelle || ""}</td>
          <td>${r.Responsable || ""}</td>
          <td>${r.Observaciones || ""}</td>
        `;
        tabla.appendChild(tr);
      });
    });
}

document.addEventListener("DOMContentLoaded", cargarRegistros);
</script>


// cargar al abrir la pÃ¡gina
window.onload = cargarRegistros;
</script>


</body>
</html>

